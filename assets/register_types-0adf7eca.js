import{serializable as p,EventList as g,syncField as O,Behaviour as m,Text as _,Renderer as x,GameObject as d,TypeStore as h}from"./needle-engine-b287b89e.js";import{O as P,V as v}from"./three.module-27b8e1d6.js";import"./index-a3d0a962.js";var j=Object.defineProperty,I=Object.getOwnPropertyDescriptor,l=(r,e,n,o)=>{for(var t=o>1?void 0:o?I(e,n):e,s=r.length-1,i;s>=0;s--)(i=r[s])&&(t=(o?i(e,n,t):i(t))||t);return o&&t&&j(e,n,t),t};const b=class extends m{constructor(){super(...arguments),this.loopSelection=!0,this.autoInitialize=!0,this.bindToParent=!1,this.currentIndex=0,this.selectionCount=0}awake(){var r;if(super.awake(),this.bindToParent){const e=(r=this.gameObject.parent)==null?void 0:r.getComponentInParent(b);e&&(e.onShowUnityEvent.addEventListener(()=>this.onShow()),e.onHideUnityEvent.addEventListener(()=>this.onHide()))}}start(){this.autoInitialize&&this.onShow()}next(){this.setIndex(this.currentIndex+1)}previous(){this.setIndex(this.currentIndex-1)}setIndex(r){r<0&&(r=this.selectionCount-1),this.currentIndex=r%this.selectionCount,this.applyState()}applyState(){}onShow(){var r;(r=this.onShowUnityEvent)==null||r.invoke()}onHide(){var r;(r=this.onHideUnityEvent)==null||r.invoke()}onIndexChanged(){this.applyState()}};let a=b;l([p()],a.prototype,"loopSelection",2);l([p()],a.prototype,"autoInitialize",2);l([p()],a.prototype,"bindToParent",2);l([p(g)],a.prototype,"onShowUnityEvent",2);l([p(g)],a.prototype,"onHideUnityEvent",2);l([O(a.prototype.onIndexChanged)],a.prototype,"currentIndex",2);class S extends a{awake(){this.autoInitialize=!1,super.awake()}}var $=Object.defineProperty,E=Object.getOwnPropertyDescriptor,C=(r,e,n,o)=>{for(var t=o>1?void 0:o?E(e,n):e,s=r.length-1,i;s>=0;s--)(i=r[s])&&(t=(o?i(e,n,t):i(t))||t);return o&&t&&$(e,n,t),t};class c extends m{start(){this.updateLabel()}next(){var e;(e=this.configurator)==null||e.next(),this.updateLabel()}previous(){var e;(e=this.configurator)==null||e.previous(),this.updateLabel()}updateLabel(){this.stateLabel&&(this.configurator?this.stateLabel.text=`${this.configurator.currentIndex+1} / ${this.configurator.selectionCount}`:this.stateLabel.text="error")}}C([p(a)],c.prototype,"configurator",2);C([p(_)],c.prototype,"stateLabel",2);var D=Object.defineProperty,L=Object.getOwnPropertyDescriptor,f=(r,e,n,o)=>{for(var t=o>1?void 0:o?L(e,n):e,s=r.length-1,i;s>=0;s--)(i=r[s])&&(t=(o?i(e,n,t):i(t))||t);return o&&t&&D(e,n,t),t};class u extends a{constructor(){super(...arguments),this.materialIndex=0,this.materials=[]}awake(){super.awake(),this.selectionCount=this.materials.length}onShow(){this.applyState()}onHide(){}applyState(){if(this.renderer==null)return;const e=this.materials[this.currentIndex];this.renderer.sharedMaterials.length>this.materialIndex?this.renderer.sharedMaterials[this.materialIndex]=e:console.error(`MaterialConfigurator (${this.name}): material index out of bounds (${this.materialIndex}) - ${this.renderer.sharedMaterials.length}`)}}f([p(x)],u.prototype,"renderer",2);f([p()],u.prototype,"materialIndex",2);f([p()],u.prototype,"materials",2);var H=Object.defineProperty,V=Object.getOwnPropertyDescriptor,T=(r,e,n,o)=>{for(var t=o>1?void 0:o?V(e,n):e,s=r.length-1,i;s>=0;s--)(i=r[s])&&(t=(o?i(e,n,t):i(t))||t);return o&&t&&H(e,n,t),t};class y extends a{constructor(){super(...arguments),this.autoDetectChildren=!0,this.objects=[]}awake(){super.awake(),this.autoDetectChildren&&this.gameObject.children.forEach(e=>{const n=e==null?void 0:e.getComponent(a);n&&this.objects.push(n)}),this.selectionCount=this.objects.length}onShow(){this.applyState(),super.onShow()}onHide(){super.onHide()}applyState(){var n;let e=null;for(let o=0;o<this.objects.length;o++){const t=this.objects[o];o==this.currentIndex?e=t:t.gameObject.activeSelf&&(d.setActive(t.gameObject,!1),(n=t.gameObject.getComponent(a))==null||n.onHide())}e&&(d.setActive(e.gameObject,!0),e.onShow())}}T([p()],y.prototype,"autoDetectChildren",2);var U=Object.defineProperty,z=Object.getOwnPropertyDescriptor,M=(r,e,n,o)=>{for(var t=o>1?void 0:o?z(e,n):e,s=r.length-1,i;s>=0;s--)(i=r[s])&&(t=(o?i(e,n,t):i(t))||t);return o&&t&&U(e,n,t),t};class w extends a{constructor(){super(...arguments),this.tempVec1=new v,this.tempVec2=new v}awake(){super.awake(),this.autoInitialize=!1,this.onShowUnityEvent.addEventListener(()=>{this.syncPosition()})}syncPosition(){const e=this.target;e&&(this.gameObject.getWorldPosition(this.tempVec1),e.getWorldPosition(this.tempVec2),e.position.add(this.tempVec1.sub(this.tempVec2)))}}M([p(P)],w.prototype,"target",2);h.add("ConfigurationElement",S);h.add("Configurator",a);h.add("ConfiguratorControls",c);h.add("MaterialConfigurator",u);h.add("ObjectConfigurator",y);h.add("SyncConfiguratorTransform",w);
